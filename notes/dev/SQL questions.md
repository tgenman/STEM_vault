---
aliases:
created: 2025-10-16 13:19
parent:
  - "[[root dev questions]]"
connected:
tags:
---
TARGET DECK: stem::dev::sql
START
math_basic_single
FRONT: Что такое оптимистичная и пессимистичная блокировки в базах данных?
BACK:
**Оптимистичная блокировка** — предполагает, что конфликты редки:  
- Данные читаются без блокировки.  
- При обновлении проверяется, не изменились ли данные (например, по версии `version` или `timestamp`).  
- Если данные изменились — выбрасывается ошибка (например, `OptimisticLockException`).  

**Пессимистичная блокировка** — предполагает, что конфликты вероятны:  
- При чтении/обновлении запись **сразу блокируется** (например, `SELECT ... FOR UPDATE`).  
- Другие транзакции ждут, пока блокировка не освободится.  

Пример:
- **Оптимистичная** — удобна при низкой конкуренции (много чтений, мало записей).  
- **Пессимистичная** — при высокой конкуренции (частые изменения одной записи).
ID: 1760612761946
END


START
math_basic_single
FRONT: Какие существуют уровни изоляции транзакций в SQL?
BACK: 
1. **READ UNCOMMITTED** — допускает грязное чтение (dirty read).  
2. **READ COMMITTED** — предотвращает грязное чтение, но допускает неповторяющееся чтение.  
3. **REPEATABLE READ** — предотвращает грязное и неповторяющееся чтение, но допускает фантомные чтения.  
4. **SERIALIZABLE** — максимальная изоляция, предотвращает все типы аномалий (эквивалентно последовательному выполнению транзакций).
ID: 1760615378011
END

TARGET DECK: stem::dev::sql
START
math_basic_single
FRONT: Что такое грязное чтение (dirty read)?
BACK: Ситуация, когда транзакция читает данные, измененные другой транзакцией, которая еще не зафиксирована.  
Если та транзакция выполнит откат, прочитанные данные окажутся недействительными.
ID: 1760615378014
END


START
math_basic_single
FRONT: Что такое неповторяющееся чтение (non-repeatable read)?
BACK: Ситуация, когда транзакция дважды читает одну и ту же строку, но между чтениями другая транзакция изменяет или удаляет эти данные.  
В результате при повторном чтении значения отличаются.
ID: 1760615378016
END

START
math_basic_single
FRONT: Что такое фантомные чтения (phantom reads)?
BACK: Когда транзакция повторно выполняет запрос с одинаковым условием, но получает разное количество строк, потому что другая транзакция вставила или удалила данные, удовлетворяющие этому условию.
ID: 1760615378018
END

START
math_basic_single
FRONT: В чем различие между грязным чтением, неповторяющимся чтением и фантомными чтениями?
BACK:
- **Грязное чтение** — чтение данных, которые другая транзакция еще не зафиксировала (и может откатить).  
- **Неповторяющееся чтение** — повторное чтение той же строки дает разные значения, т.к. другая транзакция изменила/удалила их.  
- **Фантомное чтение** — при повторном выполнении запроса возвращается разное количество строк из-за вставки/удаления другими транзакциями.
ID: 1760615378020
END

TARGET DECK: stem::dev::sql
START
math_basic_single
FRONT: Что означают принципы ACID в контексте транзакций?
BACK:
**ACID** — набор свойств, гарантирующих надежность транзакций:
1. **Atomicity (Атомарность)** — транзакция выполняется целиком или не выполняется вовсе.  
2. **Consistency (Согласованность)** — после транзакции данные остаются в целостном и корректном состоянии.  
3. **Isolation (Изоляция)** — параллельные транзакции не влияют друг на друга.  
4. **Durability (Надёжность)** — результаты успешно зафиксированных транзакций сохраняются даже при сбоях.
ID: 1760615439956
END
